# ν•™μ λ§μ¤ν„° API λ°±μ—”λ“ ν”„λ΅μ νΈ μƒνƒ

## β… μ™„λ£λ μ‘μ—… (2025-11-10)

### Phase 1: ν”„λ΅μ νΈ μ΄κΈ° μ„¤μ • λ° ν•µμ‹¬ κΈ°λ¥ κµ¬ν„ β¨

#### 1. ν”„λ΅μ νΈ κµ¬μ΅° μƒμ„±
- [x] λ””λ ‰ν† λ¦¬ κµ¬μ΅° μƒμ„±
- [x] 18κ° Python νμΌ μ‘μ„±
- [x] λ¨λ“  λ¨λ“ λ° μ„λΉ„μ¤ κµ¬ν„

#### 2. ν™κ²½ μ„¤μ •
- [x] Python κ°€μƒν™κ²½ μƒμ„± (Python 3.14)
- [x] ν•„μ ν¨ν‚¤μ§€ μ„¤μΉ μ™„λ£
- [x] PyMuPDF 1.26.6 (νΈν™μ„± λ¬Έμ  ν•΄κ²°)
- [x] .env νμΌ μƒμ„± λ° OpenAI API Key μ„¤μ •

#### 3. λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •
- [x] SQLite λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •
- [x] 5κ° ν…μ΄λΈ” μƒμ„±:
  - `documents` - PDF λ¬Έμ„
  - `summaries` - λ¬Έμ„ μ”μ•½
  - `quizzes` - ν€΄μ¦
  - `quiz_results` - ν€΄μ¦ κ²°κ³Ό
  - `wrong_answers` - μ¤λ‹µ λ…ΈνΈ

#### 4. FastAPI μ• ν”λ¦¬μΌ€μ΄μ… κµ¬ν„
- [x] FastAPI λ©”μΈ μ•± μ„¤μ •
- [x] CORS λ―Έλ“¤μ›¨μ–΄ μ„¤μ • (localhost:8080, localhost:3000)
- [x] λ©”λ¨λ¦¬ κΈ°λ° μΊμ‹± κµ¬ν„
- [x] Health check μ—”λ“ν¬μΈνΈ

#### 5. μ„λΉ„μ¤ λ μ΄μ–΄ κµ¬ν„ (Streamlit λ΅μ§ μ΄μ‹)
- [x] **OpenAI Service**: GPT-4o API νΈμ¶, μΊμ‹±, μ²­ν‚Ή
- [x] **PDF Service**:
  - PyPDFLoaderλ΅ ν…μ¤νΈ μ¶”μ¶
  - GPT-4o VisionμΌλ΅ OCR
  - μ΄λ―Έμ§€/κ·Έλν”„ λ¶„μ„
- [x] **Summary Service**:
  - 6000μ μ²­ν‚Ή μ•κ³ λ¦¬μ¦
  - 5μ¤„ μ”μ•½ μƒμ„±
  - λ¶€λ¶„ μ”μ•½ ν†µν•©
- [x] **Quiz Service**:
  - ν‚¤ν¬μΈνΈ μ¶”μ¶
  - κ°κ΄€μ‹/μ£Όκ΄€μ‹ λ¬Έμ  μƒμ„±
  - ν‚¤μ›λ“ κΈ°λ° μλ™ μ±„μ 

#### 6. API μ—”λ“ν¬μΈνΈ κµ¬ν„
- [x] PDF μ—…λ΅λ“ (`POST /api/v1/pdf/upload`)
- [x] λ¬Έμ„ μ΅°ν (`GET /api/v1/pdf/{document_id}`)
- [x] μ”μ•½ μƒμ„± (`POST /api/v1/summary/generate`)
- [x] μ”μ•½ μ΅°ν (`GET /api/v1/summary/{summary_id}`)
- [x] ν€΄μ¦ μƒμ„± (`POST /api/v1/quiz/generate`)
- [x] ν€΄μ¦ μ μ¶ λ° μ±„μ  (`POST /api/v1/quiz/submit`)
- [x] ν€΄μ¦ κ²°κ³Ό μ΅°ν (`GET /api/v1/quiz/result/{result_id}`)
- [x] μ¤λ‹µ λ…ΈνΈ μ΅°ν (`GET /api/v1/quiz/wrong-answers/{result_id}`)

#### 7. μ„λ²„ μ‹¤ν–‰ λ° ν…μ¤νΈ
- [x] μ„λ²„ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰ (http://localhost:9090)
- [x] μΆ…ν•© ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ‘μ„± λ° μ‹¤ν–‰
- [x] λ¨λ“  API μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ™ ν™•μΈ

---

## π“ ν…μ¤νΈ κ²°κ³Ό

### μΆ…ν•© ν…μ¤νΈ (2025-11-10 15:40)

#### β… PDF μ—…λ΅λ“ ν…μ¤νΈ
- Document ID: `2367c5bd-8feb-4ca4-acd6-89dc48db8155`
- Filename: `test_python.pdf`
- Content Length: 369 λ¬Έμ
- OCR Used: False
- **κ²°κ³Ό**: β… μ„±κ³µ

#### β… μ”μ•½ μƒμ„± ν…μ¤νΈ
- Summary ID: `6a174de0-c4d5-48d9-890f-6f549591ea08`
- μ”μ•½ λ‚΄μ©:
  ```
  νμ΄μ¬μ—μ„ λ³€μλ” κ°’μ„ μ €μ¥ν•λ” κ³µκ°„μ΄λ©°, μ£Όμ” λ°μ΄ν„° νƒ€μ…μΌλ΅λ”
  μ •μν•, μ‹¤μν•, λ¬Έμμ—΄, λ¶λ¦°μ΄ μμµλ‹λ‹¤. μ μ–΄λ¬Έμ€ μ΅°κ±΄λ¬Έ(if, elif, else)κ³Ό
  λ°λ³µλ¬Έ(for, while)μΌλ΅ ν”„λ΅κ·Έλ¨ νλ¦„μ„ μ μ–΄ν•©λ‹λ‹¤. ν•¨μλ” def ν‚¤μ›λ“λ΅
  μ •μν•λ©°, μ¬μ‚¬μ© κ°€λ¥ν• μ½”λ“ λΈ”λ΅μ„ λ§λ“­λ‹λ‹¤. λ¦¬μ¤νΈλ” μμ„κ°€ μλ” κ°’λ“¤μ
  μ§‘ν•©μ΄κ³ , λ”•μ…”λ„λ¦¬λ” ν‚¤-κ°’ μμΌλ΅ μ΄λ£¨μ–΄μ§„ λ°μ΄ν„° κµ¬μ΅°μ…λ‹λ‹¤.
  ```
- **κ²°κ³Ό**: β… μ„±κ³µ

#### β… ν€΄μ¦ μƒμ„± ν…μ¤νΈ
- Quiz ID: `37d679c5-6665-4ba0-8b10-bda716528dbf`
- λ¬Έν•­ μ: 3κ°
- λ¬Έν•­ μ ν•: κ°κ΄€μ‹ 2κ°, μ£Όκ΄€μ‹ 1κ°
- **κ²°κ³Ό**: β… μ„±κ³µ

#### β… ν€΄μ¦ μ±„μ  ν…μ¤νΈ
- Result ID: `878574f1-eb70-4404-9a06-fa3b78233fb1`
- μ •ν™•λ„: 66.7% (2/3 μ •λ‹µ)
- μ¤λ‹µ λ…ΈνΈ μƒμ„±: 1κ°
- **κ²°κ³Ό**: β… μ„±κ³µ

---

## π—„οΈ λ°μ΄ν„°λ² μ΄μ¤ μƒνƒ

### ν…μ΄λΈ”λ³„ λ μ½”λ“ μ
| ν…μ΄λΈ” | λ μ½”λ“ μ |
|--------|----------|
| documents | 1 |
| summaries | 1 |
| quizzes | 1 |
| quiz_results | 1 |
| wrong_answers | 1 |

### μ—…λ΅λ“λ νμΌ
- `data/uploads/2367c5bd-8feb-4ca4-acd6-89dc48db8155.pdf` (36KB)

---

## π μ„λ²„ μ •λ³΄

### μ‹¤ν–‰ μƒνƒ
- **μƒνƒ**: β… μ‹¤ν–‰ μ¤‘ (λ°±κ·ΈλΌμ΄λ“)
- **URL**: http://localhost:9090
- **API λ¬Έμ„**: http://localhost:9090/docs
- **OpenAPI μ¤ν‚¤λ§**: http://localhost:9090/openapi.json

### λ΅κ·Έ
```
INFO:     Uvicorn running on http://0.0.0.0:9090 (Press CTRL+C to quit)
INFO:     Started server process [28807]
INFO:     Application startup complete.
β… λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™” μ™„λ£
```

### API μ”μ²­ μ²λ¦¬ λ΅κ·Έ
```
INFO:     127.0.0.1:63578 - "POST /api/v1/pdf/upload" 200 OK
INFO:     127.0.0.1:63580 - "POST /api/v1/summary/generate" 200 OK
INFO:     127.0.0.1:63587 - "POST /api/v1/quiz/generate" 200 OK
INFO:     127.0.0.1:63628 - "POST /api/v1/quiz/submit" 200 OK
```

---

## π― μ£Όμ” κΈ°λ¥ ν™•μΈ

### β… PDF μ²λ¦¬
- [x] ν…μ¤νΈ μ¶”μ¶ (PyPDFLoader)
- [x] OCR μ§€μ› (GPT-4o Vision)
- [x] μ΄λ―Έμ§€/κ·Έλν”„ λ¶„μ„

### β… λ¬Έμ„ μ”μ•½
- [x] 6000μ μ²­ν‚Ή
- [x] 5μ¤„ μ”μ•½ μƒμ„±
- [x] λ¶€λ¶„ μ”μ•½ ν†µν•©

### β… ν€΄μ¦ μƒμ„±
- [x] ν‚¤ν¬μΈνΈ μ¶”μ¶
- [x] κ°κ΄€μ‹ λ¬Έμ  μƒμ„± (4μ§€μ„ λ‹¤)
- [x] μ£Όκ΄€μ‹ λ¬Έμ  μƒμ„±
- [x] JSON ν•μ‹ μ¶λ ¥

### β… μλ™ μ±„μ 
- [x] κ°κ΄€μ‹ μ •λ‹µ ν™•μΈ
- [x] μ£Όκ΄€μ‹ ν‚¤μ›λ“ λ§¤μΉ­
- [x] λ¶€λ¶„ μ μ κ³„μ‚°
- [x] ν”Όλ“λ°± μƒμ„±

### β… μ¤λ‹µ λ…ΈνΈ
- [x] μ¤λ‹µ μ €μ¥
- [x] ν”Όλ“λ°± μ κ³µ
- [x] μ •λ‹µ λ° ν•΄μ„¤ ν‘μ‹

---

## π› οΈ κΈ°μ  μ¤νƒ

### Backend
- **Framework**: FastAPI 0.121.1
- **Server**: Uvicorn 0.38.0
- **Database**: SQLite 3
- **ORM**: SQLAlchemy 2.0.44
- **Validation**: Pydantic 2.12.4

### AI & ML
- **OpenAI**: GPT-4o (text + vision)
- **LangChain**: 0.4.1

### PDF Processing
- **PyPDF**: 6.2.0
- **PyMuPDF**: 1.26.6
- **Pillow**: 12.0.0

### Others
- **Python**: 3.14.0
- **Cache**: λ©”λ¨λ¦¬ κΈ°λ° μΊμ‹±
- **CORS**: localhost:8080, localhost:3000

---

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
chatbot-backend/
β”β”€β”€ app/
β”‚   β”β”€β”€ api/v1/           # API μ—”λ“ν¬μΈνΈ
β”‚   β”β”€β”€ core/             # μ„¤μ • λ° DB
β”‚   β”β”€β”€ models/           # SQLAlchemy λ¨λΈ
β”‚   β””β”€β”€ services/         # λΉ„μ¦λ‹μ¤ λ΅μ§
β”β”€β”€ data/
β”‚   β”β”€β”€ uploads/          # μ—…λ΅λ“λ PDF
β”‚   β””β”€β”€ database.db       # SQLite DB
β”β”€β”€ venv/                 # κ°€μƒν™κ²½
β”β”€β”€ test_api.py           # μΆ…ν•© ν…μ¤νΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ run.py                # μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”β”€β”€ requirements.txt      # ν¨ν‚¤μ§€ λ©λ΅
β”β”€β”€ .env                  # ν™κ²½ λ³€μ
β””β”€β”€ README.md             # ν”„λ΅μ νΈ λ¬Έμ„
```

---

## π€ λ‹¤μ λ‹¨κ³„ (Phase 2 μμ •)

### μ¶”κ°€ κΈ°λ¥
- [ ] ν•™μµ λ¶„μ„ API κµ¬ν„
- [ ] μ¤λ‹µ λ…ΈνΈ λ¶„μ„ κΈ°λ¥
- [ ] ν•™μµ ν†µκ³„ λ€μ‹λ³΄λ“ λ°μ΄ν„°
- [ ] μ‚¬μ©μ μΈμ¦/κ¶ν• (μ„ νƒμ‚¬ν•­)

### μµμ ν™”
- [ ] API μ‘λ‹µ μ†λ„ μµμ ν™”
- [ ] μΊμ‹± μ „λµ κ°μ„ 
- [ ] μ—λ¬ ν•Έλ“¤λ§ κ°•ν™”
- [ ] λ΅κΉ… μ‹μ¤ν… κ°μ„ 

### ν…μ¤νΈ
- [ ] λ‹¨μ„ ν…μ¤νΈ μ‘μ„±
- [ ] ν†µν•© ν…μ¤νΈ μ¶”κ°€
- [ ] λ¶€ν• ν…μ¤νΈ

### λ°°ν¬
- [ ] Docker μ»¨ν…μ΄λ„ν™” (μ„ νƒμ‚¬ν•­)
- [ ] ν™κ²½ λ³€μ κ΄€λ¦¬ κ°μ„ 
- [ ] ν”„λ΅λ•μ… μ„¤μ •

---

## π“ μ°Έκ³ μ‚¬ν•­

### Streamlit μ•± λ΅μ§ μ΄μ‹ μ™„λ£
- β… OCR λ΅μ§ (extract_text_with_ocr_pymupdf)
- β… μ²­ν‚Ή μ•κ³ λ¦¬μ¦ (chunk_text, 6000μ)
- β… μ”μ•½ λ΅μ§ (gpt_summarize_k5, summarize_long_text)
- β… ν‚¤ν¬μΈνΈ μ¶”μ¶ (extract_keypoints_for_quiz)
- β… ν€΄μ¦ μƒμ„± (generate_quiz_from_doc)
- β… μ±„μ  λ΅μ§ (grade_quiz)

### API μ‚¬μ© μμ‹

#### PDF μ—…λ΅λ“
```bash
curl -X POST "http://localhost:9090/api/v1/pdf/upload" \
  -F "file=@test.pdf" \
  -F "use_ocr=false" \
  -F "analyze_images=false"
```

#### μ”μ•½ μƒμ„±
```bash
curl -X POST "http://localhost:9090/api/v1/summary/generate" \
  -H "Content-Type: application/json" \
  -d '{"document_id": "document-id-here"}'
```

#### ν€΄μ¦ μƒμ„±
```bash
curl -X POST "http://localhost:9090/api/v1/quiz/generate" \
  -H "Content-Type: application/json" \
  -d '{"document_id": "document-id-here", "num_items": 4}'
```

---

## β… ν”„λ΅μ νΈ μƒνƒ: μ •μƒ μ‘λ™ μ¤‘

λ¨λ“  ν•µμ‹¬ κΈ°λ¥μ΄ κµ¬ν„λκ³  ν…μ¤νΈλ¥Ό ν†µκ³Όν–μµλ‹λ‹¤.
ν”„λ΅ νΈμ—”λ“μ™€ μ—°λ™ν•  μ¤€λΉ„κ°€ μ™„λ£λμ—μµλ‹λ‹¤.

**μµμΆ… μ—…λ°μ΄νΈ**: 2025-11-10 15:40 KST
